!function(){function t(t,o){var i=$("#"+t),n=i.find(".tpl").html();n.indexOf("${N}")>-1&&i.find(".fcontent").html(n.replace("${N}",o))}Global.floats=Global.floats||{};var o=$(".float_text");!function(){for(var i=0;i<o.length;i++){var n=o[i].id;Global.floats[n]={},Global.floats[n].update=t,t(n,1)}}()}(),function(){function t(t){if(Global.floats)for(var o in Global.floats){var i=Global.floats[o];i.update(o,t)}}function o(){c.post("/v1/apis/activityx/act3/scratchCoupon",null,function(o){if(1002==o.code||1030==o.code)return void i();if(200!=o.code)return void s(o.message);var a=o.data;return f=a.prize,e(a.prize),2==a.type?void $("img.smask").css("visibility","hidden"):3==a.type||4==a.type?(t(0),void $("img.smask").css("visibility","hidden")):void n()},function(t){console.log(t)})}function i(){$("img.smask").on(l,function(t){s("用户未登录，请先登录"),_hmt.push(["_trackEvent",Global.code+"_toLogin","click",Global.code+"_去登录"]),window.location.href="native://login?goBackAfterLogin=true"})}function n(){$(".smask").eraser({size:20,completeRatio:.5,completeFunction:function(){$($(this)[0].canvas[0]).css("visibility","hidden"),t(0),a()}})}function e(t){for(var o=$(".scratchWrap"),i=0;i<o.length;i++)for(var n=$(o[i]),e=n.data("key"),a=Global.actData[e].prizes,l=o.find(".sprize"),c=n.find(".smask").height(),i=0;i<a.length;i++){var s=a[i],r=l.eq(i);s.id==t?(r.css({"margin-top":-c+"px","background-image":"url("+s.img+")"}),r.show()):r.remove()}}function a(){_hmt.push(["_trackEvent",Global.code+"_active_prize","click",Global.code+"_领取奖品"]);c.post("/v1/apis/activityx/act3/saveACT3",{prize:f},function(t){return console.log(t),1002==t.code||1030==t.code?void s(t.message):200!=t.code?void s(t.message):void 0},function(t){console.log(t)})}var l=null!==document.ontouchstart?"click":"touchstart",c=Global.utility,s=Global.utility.toast,r=$.trim(c.getQueryParams("channelCode"));Global.channelCode=r;var f;!function(){o(),$(".scratchWrap .btn").on(l,function(t){t.stopPropagation();var o=$(this).data("key");_hmt.push(["_trackEvent",Global.code+"_"+o,"click",Global.code+"_点击按钮"]);var i=new Global.Handle($(this));if(i)return void i()})}()}(),function(){function t(t){var o=t.scrollWidth-t.offsetWidth;setInterval(function(){++t.scrollLeft>=o&&(t.scrollLeft=0)},30)}function o(t){if(l=t.clientHeight,!c)return t.innerHTML+=t.innerHTML,t.scrollTop=0,void(t.scrollHeight>l*n&&(c=setTimeout(function(){o(t)},e)));a==l?(t.scrollHeight-l<=t.scrollTop&&(t.scrollTop=t.scrollHeight-l),a=0,c=setTimeout(function(){o(t)},e)):(t.scrollTop++,a++,c=setTimeout(function(){o(t)},10))}var i=document.getElementsByClassName("rcontent"),n=3;!function(){for(var e=0;e<i.length;e++){var a=$(i[e]),l=a.data("orient"),c=a.css("line-height");a.css("height",parseInt(c)*n+"px"),"orientH"==l?t(a[0]):o(a[0])}}();var e=2e3,a=0,l=24,c=0}();